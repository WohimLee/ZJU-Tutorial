## MCP
>安装
```sh
# 官方推荐 python 3.10
pip install mcp
```


### 🌟 什么是 MCP（Model Context Protocol）？

MCP = Model Context Protocol
它是 OpenAI 推出的 开放协议，用于让 LLM（如 GPT）能够以一种统一、标准、安全的方式访问外部能力，例如：

- 文件系统
- 数据库
- API
- 业务工具（如 Notion、Jira、GitHub）
- 私有数据或企业内部系统
- 自定义函数 / 插件

换句话说，MCP 就像是：“让模型拥有能力的 USB 接口”：一个模型只要支持 MCP，就能插上不同的“工具设备”，立即获得新的技能。

它不是一个框架，也不是库，而是一组 `协议 + 通信标准`

### 🔧 MCP 主要解决的问题

传统的 Agent 生态中存在几个问题：

##### 1. 每个 Agent/模型都有自己的插件接口 → 无法复用

MCP 统一了接口，一个工具可同时被多个模型直接使用。

##### 2. 外部调用方式混乱

比如插件、工具调用 API、RAG 访问数据、工具链等，都有不同的实现方式。
MCP 把这些都统一成标准的：
- 工具（tools）
- 资源（resources）
- 事件流（events）

##### 3. 私有数据访问不安全 / 不标准

MCP 定义了隔离沙箱、安全访问机制，使模型只能访问你明确允许的内容。

##### 4. 企业系统联动困难

MCP 让 Agent 能像人一样使用你的内部系统，而不需要给模型 API 密钥或暴露后端。

### 🧩 MCP 的核心概念
##### 1. Server（工具服务器）

提供实际能力（工具）的实体。

比如：
- 一个 MCP server 负责访问 GitHub
- 一个 MCP server 负责分析本地 PDF
- 一个 MCP server 负责操作数据库

Server 以 JSON-RPC + Websocket 或 stdio 的方式运行。

##### 2. Client（客户端）

LLM 所在的环境（如 ChatGPT、应用框架，如 `LangChain`、`LlamaIndex` 等）
它调用 MCP Server 暴露的功能。

你可以理解为：`LLM(Client) → MCP Server → 工具/数据/API`

##### 3. Tools（工具）

MCP server 对外提供的可调用动作。
```sh
工具示例：
- search(query: string)
- write_file(path, content)
- get_weather(city)
- run_sql(sql)
- create_ticket(title)
```
LLM 可以直接调用这些工具

##### 4. Resources（资源）

工具服务器暴露的可读取资源，比如：
- 文本文件
- 表格数据
- wiki 页面
- 文件目录信息
- 缓存内容

LLM 可以“订阅资源变化”.

##### 5. Prompts（提示模板）

MCP server 能提供一些模板提示，让模型复用。

### ⚙️ MCP 的运行流程

以 ChatGPT 调用一个 MCP 工具为例：

1. 用户请求：“帮我找 GitHub 仓库中最新 5 个 PR”
2. ChatGPT 发现可以使用 MCP → GitHub server，工具：`list_pull_requests`
3. ChatGPT 自动构造工具调用
    ```py
    {
    "name": "list_pull_requests",
    "arguments": { "limit": 5 }
    }
    ```
4. MCP server 调用 GitHub API → 返回结果给模型
5. 模型将结果整理解答

全程无需用户暴露 API 密钥给模型。

### 🌈 与其他技术的关系
| 技术            | 对应关系              |
| ------------- | ----------------- |
| Plugins（旧版插件） | MCP 的“前身”，现已被统一替代 |
| Tools（函数调用）   | MCP 中的一个部分        |
| RAG 资源        | MCP 中的 resource   |
| Agent 框架      | MCP 作为其工具标准       |
| API/SDK       | MCP server 可以封装它们 |

### 🔮 MCP 为什么重要？
🌐 1. 统一 Agent 工具接口

未来所有 Agent 工具都可通过 MCP 互通。

🔌 2. 开放生态

任何人都可以写新的 server，被所有模型使用。

🛡 3. 安全性高

模型无法越权访问你未授权的资源。

🧠 4. 让模型真正有“行动能力”

模型不只是回答问题，而是可以“操作世界”。