## Function Calling

两种不同的使用方式

### 1 functions
>声明格式
```py
functions = [
    {
        "name": "get_weather",
        "description": "查询某个城市的天气",
        "parameters": {
            "type": "object",
            "properties": {
                "city": {"type": "string", "description": "城市名称"}
            },
            "required": ["city"]
        },
    }
]
```


### 2 tools

>声明格式
```py
tools = [
    {
        "type": "function",
        "function": {
            "name": "get_weather",
            "description": "查询某个城市的天气",
            "parameters": {
                "type": "object",
                "properties": {
                    "city": {"type": "string", "description": "城市名称"}
                },
                "required": ["city"],
            },
        },
    }
]
```



### 3 总结
`functions 方式` 更适合“单轮调用某个函数”，属于 OpenAI 传统 function calling 模式。
`tools 方式` 更符合“Agent 模式”，把工具能力当成对话上下文的一部分，因此能带来 `更自然、更强、多轮` 的工具调用能力。

| 项目                 | **方式一：API 传 functions**         | **方式二：system message 放 tools**         |
| ------------------ | ------------------------------- | -------------------------------------- |
| 工具定义               | API 参数指定，不在消息内容里                | 写在 system 消息中                          |
| 工具是否成为对话上下文        | ❌ 否                             | ✅ 是                                    |
| 是否支持“连续多次调用工具”     | 🔶 许多模型不支持                      | ✅ 支持（如 Qwen、DeepSeek、Llama 的 Agent 模式） |
| 是否适合构建“智能体（Agent）” | ❌ 不太适合                          | ✅ 非常适合                                 |
| 是否依赖厂商 API 限制      | 是（如 openai 标准 function calling） | 否（通用，各模型兼容）                            |
| 背后理念               | 调用函数                            | 工具增强的智能体                               |
| 训练目标             | 单轮调用一个函数       | 多轮推理 + 多工具 agent  |
| 模型能否连续调用工具       | ❌ 默认不会         | ✅ 原生支持            |
| 需不需要写 Agent loop | ✔️ 必须          | ❌ 不需要（模型自己决定）     |
| 工具是否是对话上下文的一部分   | ❌ 否            | ✔️ 是              |
| 工具调用格式           | OpenAI 专用      | 多厂商通用             |
| 非 OpenAI 模型效果    | ❌ 差            | ✔️ 强              |
