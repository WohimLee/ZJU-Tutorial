## MCP
>安装
```sh
# 官方推荐 python 3.10
pip install mcp
```

### 一、MCP 是什么？

MCP（Model Context Protocol）= 面向 AI Agent 的“工具协议标准”
由 Anthropic 发起，用来统一 “大模型 ↔ 工具” 的调用方式。

你可以把 MCP 理解为：

- 类似 OpenAI Function Calling 的升级版 + 标准化版
- 让模型可以通过一个统一协议调用任意外部工具
- 工具可以在本机、远程服务器、浏览器扩展、桌面应用等任何地方
- 多个 Agent、多个模型、多个客户端都能共享同一套 MCP 工具

一句话总结：

>MCP 让工具变成“像 API 一样可被任何模型调用”的标准接口。

### 二、为什么需要 MCP？

在 MCP 之前：

- 工具调用 API 都是各家自己定义（OpenAI、Qwen、Claude 都不一样）
- 工具如果写一次，只能给某一个模型用
- 无法跨模型、跨系统复用工具

MCP 解决的核心问题：

- 工具标准化: 每个工具通过 schema 描述输入输出 → 任何模型都能读懂
- 通信标准化: 客户端如何与工具服务对话 → 使用 JSON-RPC over 多种传输
- 跨模型可复用: 一个 MCP 工具可以同时服务于多个模型（Claude/Qwen/OpenAI/本地 LLM）
- 安全可控: 工具端和客户端隔离，可以远程部署，也可以沙箱化


### 三、MCP 的核心能力

下面是 MCP 标准化提供的能力结构：
```
list_tools → 当前服务有哪些工具？
call_tool  → 调一个工具
create_session → 建立上下文 session（可选）
text content / file content / resources → 返回多种类型内容
```

通过这些，MCP tool server 可以做到：

- 返回文本
- 返回文件
- 文件引用（引用服务器托管的资源）
- 甚至未来支持更多格式（图片、视频、二进制）

### 五、结合例子来理解

在你的 WebSocket + Qwen 客户端中：

客户端连接 ws://127.0.0.1:8000/mcp

调用 session.list_tools() → 自动得到：
```json
{
  "name": "get_weather",
  "inputSchema": { ... }
}
```

Qwen 根据 schema 自动选择是否调用工具

工具实际执行 Python 代码（requests / Tavily）

工具返回 JSON-RPC，Qwen 再结合上下文总结中文回答

所以 MCP 的作用就是：把你的本地 Python 函数 → 映射为模型工具。

### 七、最简的理解总结
##### 💡 MCP 是什么？

- 一个 让 AI 模型可以调用外部工具 的开放标准协议
- 工具不再绑定某家模型，而是任何模型都能调用

##### 💡 通信方式有哪些？

- stdio：本地子进程最方便
- WebSocket：远程部署最常用
- SSE / HTTP：浏览器前端常用

不管是哪种，本质上都是 `JSON-RPC`

##### 💡 MCP 工具 = 普通 Python/TS 函数 + schema
- 你写工具
- MCP 自动把它变成“可被 LLM 调用的标准工具”