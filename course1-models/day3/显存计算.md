


1 GB=1024 MB
1 MB=1024 KB
1 KB=1024 Byte
1 Byte =8 Bit


FP32 32Bits, 4Bytes
FP16 16Bits, 2Bytes


## 输入输出



b: Batch Size = 1
s: Sequence Length = 1024
h: Hidden Size: 5120

Embedding 后输入

b*s*h*2/1024/1024

FP16: 10MB

输入输出：20MB

#### 2 模型参数/梯度值
>Llama-13B

$1B=10^9$
$1 \text{GB}=1024^3 \text{Byte}$
$FP16: 13*2=26 \text{GB}$

两者各占 26GB

#### 3 优化器
- 这里是 FP32

梯度指数平滑值：$13\times4 = 52 \text{GB}$
梯度平方指数平滑值: $13\times4 = 52 \text{GB}$
模型参数: $13\times4 = 52 \text{GB}$

一共 156 GB

#### 4 激活值

和 batch_size  seq_len相关

`s*b*h*(34+5*a*s/h)*L/1024/1024/1024 GB`

s: seq_len
b: batch size
h: 隐藏层大小
a: Attention 头
L: 层数