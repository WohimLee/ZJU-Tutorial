
### 💡 最后总结：测试集是这样做出来的

#### 🎯 Embedding vs Reranker：测试集制作的区别
| 模型种类      | 测试集结构           | 核心问题            |
| --------- | --------------- | --------------- |
| Embedding | q → positive    | 模型能否召回到正确文档？    |
| Reranker  | q + 多文档 → label | 模型能否把正确文档排到最前面？ |

二者测试集的“构造方式” 有本质区别，但可以基于同一套 query 系统构建。

#### Embedding 测试集 = “检索匹配”结构

✔ 从真实 query 收集
✔ 为每个 query 匹配正确文档 positive
✔ 加入多个 negative（随机 + hard negative）
✔ 用来测试 Recall@k

#### Reranker 测试集 = “排序”结构

✔ 一个 query
✔ 一组候选文档（embedding 检索 top-k + negatives）
✔ 每个文档标注 0/1
✔ 用来测试 MRR, MAP, nDCG